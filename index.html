<html>

<head>
    <!-- Third party dependencies -->
    <link rel="stylesheet" href="libs/material-components-web-10.0.0.min.css">
    <link rel="stylesheet" href="libs/material-icons.css">
    <script src="libs/material-components-web-10.0.0.min.js"></script>

    <!-- Our own resources-->
    <link rel="stylesheet" href="src/css/theme.css">
    <script src="src/js/Note.js"></script>
    <script src="src/js/Scale.js"></script>
    <script src="src/js/ScalePlayer.js"></script>
    <script>
        async function playAllScales(startingNote) {
            for (const scale of [
                Scale.MAJOR,
                Scale.NATURAL_MINOR.map(note => note - 3),
                Scale.HARMONIC_MINOR.map(note => note - 3),
                Scale.MELODIC_MINOR.map(note => note - 3),
                Scale.BLUES
            ]) {
                await scalePlayer.playScale(startingNote, scale, 0.25)
            }
        }
        var scalePlayer = new ScalePlayer()
        function doit() {
            if (scalePlayer.isPlaying()) {
                scalePlayer.stop()
            } else {
                const startingNote = Note.Notes[document.querySelector("#notes").value]
                playAllScales(startingNote).then(() => scalePlayer.stop())
            }
        }
    </script>
</head>

<body>
    <select name="notes" id="notes">
        <option value="C4">C4</option>
        <option value="CS4">C#4</option>
        <option value="D4">D</option>
        <option value="DS4">D#4</option>
        <option value="E4">E4</option>
        <option value="F4">F4</option>
        <option value="FS4">F#4</option>
        <option value="G4">G4</option>
        <option value="GS4">G#4</option>
        <option value="A4">A4</option>
        <option value="AS4">A#4</option>
        <option value="B4">B4</option>
        <option value="C5">C5</option>
    </select>

    <button onclick="doit()">Click me</button>
</body>

</html>